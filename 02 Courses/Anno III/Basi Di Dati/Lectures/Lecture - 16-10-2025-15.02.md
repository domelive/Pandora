---
date: 2025-10-16 15.02
course: 02 Courses/Anno III/Basi Di Dati/Lectures
tags:
  - lecture
  - "#lab"
reviewed: false
last_reviewed:
next_review:
---
## üß† Concetti
---
#### DBMS
+ Software che crea e gestisce database.
+ Modo efficiente per gestire una grande quantit√† di dati.
+ Deve contenere delle relazioni (tabelle) e deve poter fare query SQL.
	+ Le query ci ritornano risultati sotto forma di altre tabelle.
+ Architettura:
	+ Memoria secondaria (disco) dove sono tenuti tutti i dati.
		+ L'utente non pu√≤ interagire direttamente con la memoria secondaria.
	+ Managers per file, buffer e storage.
	+ Livello user, dove vengono anche inseriti dei layers di sicurezza.
#### Processore Delle Query
+ √à la parte che impatta di pi√π le performance del nostro DBMS.
+ Due unit√†:
	+ Compilatore: trasforma query SQL in un piano che il DBMS pu√≤ seguire.
		+ Parsing: si costruisce una struttura ad albero (AST) della query.
		+ Pre-processing: la query SQL si trasforma in algebra relazionale.
		+ Ottimizzazione: si ottimizza la query in algebra relazionale.
	+ Motore di esecuzione: esegue tutti gli step che il compilatore ha prodotto per restituire il risultato corretto all'utente.
		+ Interagisce con componenti come il buffer, lo scheduler e il log manager.
#### Manager Delle Risorse
+ I dati di un DBMS sono sempre su una memoria secondaria.
+ Esso sa dove sono questi dati e come accedervi in fretta.
+ Tre parti:
	+ Index/file/record manager: sa lo schema del database e le strutture dati per accedere in fretta ai dati.
	+ Buffer manager: partiziona la memoria principale in buffer pi√π piccoli dentro i quali possiamo trasferire blocchi del disco.
	+ Storage manager: tiene traccia della location del file sul disco. Ottiene i blocchi e li manda al buffer manager.
#### Manager Delle Transazioni
+ Transazione: blocco di istruzioni SQL come se fosse un'unica query.
	+ √à un'istruzione atomica.
	+ Il suo scopo √® quello di lasciare il database in uno stato consistente.
+ Rappresenta l'esecuzione di un programma user che comprenda delle `read` e delle `write`.
#### Logging E Recovery
+ File di log: ogni operazione viene scritta su questo file.
+ Log manager: scrive sui buffer tutte le operazioni, e quando ci assicuriamo che sia giusto si scrive sul disco.
	+ In questo modo se c'√® un crash il log non viene scritto direttamente nel disco.
+ Esamina i log, e nel caso ripristina il database in uno stato consistente.
#### Concurrency Control
+ Le transazioni devono essere eseguite in maniera isolata.
+ ...
#### Risoluzione Dei Deadlock
+ Le transazioni competono per le risorse in base a dei lock.
	+ Due query che hanno bisogno di due risorse che sono occupate da qualcun'altro.
+ Per risolvere i deadlock, si fa un rollback di una o pi√π transazioni per far in modo che gli altri possano procedere.
#### Implementazione Delle JOIN
+ Sono le operazioni che consumano pi√π tempo di tutte.
+ Ci sono diversi modi:
	+ Nested loop.
		+ La pi√π lenta, in quanto si deve vedere riga per riga quale fa match.
	+ Single loop.
		+ C'√® un indice che velocizza il processo, facendoci fare un solo ciclo.
			+ L'indice mette in ordine una delle due tabelle.
			+ Ogni riga della tabella che non √® ordinata viene 
		+ Per ogni riga si accede direttamente alle righe dell'altra tabella che soddisfano il predicato del join.
	+ Sort-merge.
		+ Le tabelle sono ordinate sul valore dell'attributo join.
	+ Hash-based.
		+ Preferibile se le tabelle sono grandi e tante.
		+ Viene fatta una funzione hash ad entrambe le tabelle.
#### Propriet√† ACID
+ Garantiscono l'esecuzione concorrente e sicura delle transazioni.
	+ Atomicity: transazione = unit√† atomica.
	+ Consistency: tutte le transazioni devono mantenere la consistenza del database.
	+ Isolation: ogni transazione deve essere isolata.
	+ Durability: i cambiamenti di una transazione non devono mai essere persi da cambiamenti successivi.
#### Consistenza E Isolamento
+ La consistenza deve essere garantita dall'utente.
	+ Dobbiamo stare attenti quando facciamo delle query.
+ L'isolamento √® garantito dal fatto che quando finisco di eseguire le query, il risultato di esse √® uguale al risultato ottenuto eseguendole dalla prima all'ultima in serie.
	+ Alla fine deve essere come se avessi fatto tutte le operazioni in serie.
+ L'ordine delle transazioni dipende dallo scheduler.
	+ Decide quale transazione √® pi√π sicura e la fa partire prima.
#### Atomicity E Durability
+ Dobbiamo fermare una transazione se:
	+ Ci sono delle anomalie interne.
	+ Se ci sono delle eccezioni.
	+ Se ci sono dei crash del sistema.
+ Ci dobbiamo assicurare che una transazione abortita non cambi la consistenza del database.
+ Tutte le operazioni vengono scritte nel log.
	+ Controllo che nel log ci siano `start transaction` ed `end transaction`.
+ Se cancelliamo una transazione il DBMS controlla il log e ritorna all'ultimo stato consistente prima di fare la transazione con un rollback.
	+ Garantiscono la durabilit√†.
#### Consistenza E Transazioni
+ Una transazione parte da uno stato consistente, pu√≤ passare da stati inconsistenti, ma deve sempre terminare in uno stato consistente.
	+ Stato: come sono messe le tabelle del database.
	+ Posso passare da stati inconsistenti in quanto o torno al punto iniziale (consistente) o al punto finale (consistente).
#### Schedule
+ Ogni transazione ha un'azione finale.
	+ Commit: √® andato tutto bene.
	+ Abort: √® andato tutto male.
+ Uno schedule √® una sequenza di commit e abort prese da un set di transazioni.
	+ Lunga lista di istruzioni di tutte le transazioni.
+ L'ordine √® lo stesso delle transazioni corrispondenti.
	+ Rappresenta l'esecuzione cronologica di esse.
+ Permettono di descrivere l'esecuzione intermittente di tabelle che accedono agli stesi dati.
+ Attributi di una transazione:
	+ Completo: hanno commit o abort per ogni operazione nella transazione.
	+ Seriale: tutte le transazioni vengono eseguite una alla volta.
+ Serializzabile: sia completo che seriale. (?)
#### Esecuzione Alternante (?) Di Transazioni
+ Tipi di conflitti:
	+ Scrittura-lettura: leggo ma l'altro non ha ancora fatto il commit della write.
	+ Lettura-scrittura: scrivo ma l'altro non ha ancora fatto il commit della read.
	+ Scrittura-scrittura: scrivo ma l'altro non ha ancora fatto il commit della write.

## ‚ùì Domande
---

## üí° Riferimenti
---

## üß© Tasks
---
+ [ ] Review [[Lecture - 16-10-2025-15.02]]
+ [ ] Bisogna finire tutto il lucido di [[Lecture - 16-10-2025-15.02]].

```button 
name ‚úÖ Mark [[Lecture - 16-10-2025-15.02]] As Reviewed 
type command 
action QuickAdd: Mark As Reviewed
```
