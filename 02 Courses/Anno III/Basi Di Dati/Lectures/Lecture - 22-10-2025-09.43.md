---
date: 2025-10-22 09.43
course: 02 Courses/Anno III/Basi Di Dati/Lectures
tags:
  - lecture
  - "#basic_sql"
reviewed: false
last_reviewed:
next_review:
---
## üß† Concetti
---
#### Natural Join
+ In SQL esiste il costrutto `NATURAL JOIN` che ha differenza del `JOIN` non prende nessun tipo di attributo.
#### Outer Join
+ Sono introdotti per rispondere all'esigenza di non dover perdere il contenuto delle tabelle derivanti dal `JOIN`.
	+ Se non c'√® match questi valori non rientrano nel risultato del `JOIN`.
+ Tre tipi:
	+ `LEFT`: Preservano il contenuto dell'operando sinistro.
	+ `RIGHT`: Preservano il contenuto dell'operando destro.
	+ `FULL`: Preservano il contenuto di entrambi gli operandi.
+ A volte la keyword `OUTER` viene omessa e basta mettere uno dei tre tipi sopra.
#### Ordinare Il Risultato
+ Si pu√≤ ordinare il risultato in ordine crescente `ORDER BY ... ASC`.
	+ Di default.
+ Si pu√≤ ordinare il risultato in ordine decrescente `ORDER BY ... DESC`.
+ Regola che si applica in fondo alla query.
+ Si pu√≤ ordinare su pi√π attributi diversi.
#### Unione, Intersezione E Differenza
+ A quanto pare √® una cosa sgraziata.
+ Possiamo unire due `SELECT` con `UNION`.
	+ Si pu√≤ inserire `ALL` per mettere insieme degli insiemi con delle ripetizioni.
	+ Viene chiamata unione multi-set.
	+ √à importante la notazione posizionale.
		+ Se invertiamo la posizione degli argomenti della `SELECT` rischiamo di avere dei comportamenti che non vogliamo avere.
			+ Si assumono i nomi del primo operando.
+ Possiamo sottrarre due `SELECT` con `EXCEPT`.
	+ Pu√≤ essere espresso pi√π avanti con una serie di query annidate.
+ Possiamo intersecare due `SELECT` con `INTERSECT`.
#### Query Annidate
+ Ad esempio, al posto di fare una `JOIN` facciamo due `SELECT` annidate.
+ Sono meno dichiarative di quello non annidate.
	+ Non c'√® un ordine in cui fare le cose.
+ Sono pi√π leggibili in quanto o utilizzano meno variabili oppure rispecchiano il principio divide et impera.
	+ Una query complicata viene divisa in pi√π query semplici.
+ La sotto-query pi√π piccola non pu√≤ usare delle operazioni insiemistiche.
	+ Lo standard SQL lo vieta.
	+ Limitazione non significativa.
+ Possiamo usare gli operatori `ANY`, `ALL` e `IN`.
	+ Possono essere combinati con gli operatori di confronto tradizionali.
	+ Per risolvere il problema dell'omogeneit√† del risultato.
		+ La query pu√≤ generare pi√π di un valore.
	+ `Attribute op ANY( Expr )`.
		+ Le tuple di una query esterna matchano se soddisfano il predicato all'interno della query interna.
	+ `Attribute op ALL( Expr )`.
		+ Deve valere all'interno di ogni tupla all'interno dell'espressione.
	+ `Attribute IN( expr )`.
		+ Sorta di appartenenza.
		+ L'attributo prende dei valori su quello che restituisce l'espressione.
	+ Possono essere tutti legati.
	+ Equivalenze: (==Da riguardare==)
		+ `A IN( Expr ) === A = ANY( Expr )`.
		+ `A NOT IN( Expr ) === A != ALL( Expr )`.
+ Regole di visibilit√†.
	+ Non √® possibile riferire variabili dichiarate nei blocchi pi√π interni.
	+ Se un nome di una variabile √® omesso si assume che essa sia quella pi√π esterna.
+ Semantica:
	+ La query interna viene eseguita una volta all'interno di ciascuna tupla nella query pi√π esterna.
		+ Si creano delle viste che modificano lo schema del database.
	+ Calcolo prima quella pi√π interna e poi via via quelle pi√π esterne.
+ `EXISTS( Expr )`.
	+ Predicato che prende un'espressione ed √® vero se e solo se l'espressione restituisce almeno una tupla.
	+ Tipicamente `Expr` √® una query annidata.
	+ Utile per legare delle variabili tra query esterne e annidate.
+ Dove posizionarle:
	+ Di solito si trovano nella clausola `WHERE`.
	+ Ci sono dei casi in cui viene fatta nella clausola `FROM` quando l'annidamento consiste in un'altra vista e questo richiede la modifica dello schema.
	+ Alcuni dialetti di SQL le usano anche nella `SELECT`, ma √® molto meno comune.
		+ Equivalente a fare un `JOIN`.
#### Funzioni Aggregate
+ Usate per fare dei semplici calcoli all'interno della target list (`SELECT`).
	+ SQL non nasce come un linguaggio per fare calcoli matematici, per√≤ √® in grado di farlo.
+ `COUNT`: conta le righe.
	+ Ritorna una tabella.
	+ Prima calcola il risultato della query.
	+ Successivamente applica la funzione per contare le tuple.
	+ Possiamo anche fare `COUNT(DISTINCT ...)`.
		+ Chiediamo i valori distinti di quell'attributo.
	+ Se facciamo `COUNT` su un attributo che pu√≤ avere valori nulli, questi non vengono contati nel risultato ottenuto.
		+ Stessa cosa se utilizziamo il `DISTINCT`.
+ `MIN | MAX`: calcola il minimo o il massimo in un certo range di valori.
	+ La target list deve avere tutti gli attributi dello stesso tipo.
+ `AVG`: calcola la media.
	+ Non prende in considerazione i valori nulli.
+ `SUM`: calcola la somma.
#### Grouping
+ Le funzioni aggregate possono operare su gruppi di relazioni.
+ Per fare ci√≤ si utilizza il costrutto `GROUP BY`.
	+ Raggruppa in una tabella i valori in base a uno o pi√π attributi.
		+ La target list diventa tutti i valori dopo gli attributi del raggruppamento.
	+ Prende almeno un attributo.
+ Semantica:
	+ Prima esegue la query senza la funzione di aggregazione e senza operatore.
	+ Poi raggruppa i valori in base agli attributi.
	+ Poi applica gli operatori di aggregazione e ritorna il risultato.
+ Utile se possiamo utilizzare questo costrutto per filtrare dei valori nelle tabelle.
	+ `HAVING`: clausola da mettere dopo il `GROUP BY` per filtrare i valori su una determinata condizione. (==da rivedere==)
		+ Coinvolge una funzione aggregata.
	+ Quando uso `WHERE` al posto di `HAVING`?
		+ `WHERE` lo uso quando ho delle condizioni riga per riga.
		+ `HAVING` quando devo applicare un operatore aggregato su un gruppo di righe.

## ‚ùì Domande
---

## üí° Riferimenti
---

## üß© Tasks
---
+ [ ] Review [[Lecture - 22-10-2025-09.43]]

```button 
name ‚úÖ Mark [[Lecture - 22-10-2025-09.43]] As Reviewed 
type command 
action QuickAdd: Mark As Reviewed
```
