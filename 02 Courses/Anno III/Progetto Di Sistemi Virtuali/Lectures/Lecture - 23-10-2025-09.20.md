---
date: 2025-10-23 09.20
course: 02 Courses/Anno III/Progetto Di Sistemi Virtuali/Lectures
tags:
  - lecture
  - "#progetti_vs"
reviewed: false
last_reviewed:
next_review:
---
## üß† Concetti
---
#### Progetti Base
+ `pexpect`: unit test con libreria python.
	+ Renzo vorrebbe ricreare i gemelli dei tutorial di virtual square con questa libreria.
	+ Sostanzialmente bisogna fare degli script partendo dagli esempi in modo da rendere questi ultimi automatici.
	+ Una specie di unit test.
		+ Non si ha la garanzia di aver fatto tutto bene.
		+ Alcuni bug vengono evitati.
			+ Occorre un maggiore livello di dettaglio all'interno dello script.
	+ `child = pexpect.spawn(cmd)`: crea un processo per lanciare un comando.
	+ `child.expect(str)`: si aspetta che ci sia un determinato output, altrimenti lancia un'eccezione.
+ `fusefatfs`: aggiornamento del modulo in qualche modo. (?) 
	+ Abbiamo visto `fuse2fs` che √® il modulo `fuse` per montare un filesystem.
	+ Modulo usatissimo all'interno dei sistemi embedded.
	+ Per ogni versione viene rilasciato un archivio e non una release GitHub.
	+ Espansione del modulo di Renzo su GitHub.
+ `vde2`: aggiustare degli script di building.
	+ Utilizza ancora gli auto-tools come `automake` e `autoconfig`.
	+ Ci sono due script di CI che non vanno.
		+ Controllano che tutto funzioni su iOS e in BSD.
			+ Per BSD basta un virtual machine per vedere dove fallisce.
	+ Anche il tutor ci sta lavorando.
+ DNS over HTTP: usato per eludere delle entit√† nazionali.
	+ Si utilizzano al posto di quelli ordinari con TCP e UDP, in modo che la comunicazione non sia tracciabile.
	+ Sarebbe da fare tutto da capo, in quanto manca all'interno di `vde`.
+ Creare i tutorial `sshlirp` e `vdelxc`.
	+ `sshlirp` per creare una VPN al volo.
	+ `vdelxc` riguarda i container linux.
		+ La versione ufficiale ha un suo meccanismo fisso di networking.
			+ Usa un bridge del kernel in modo che i container si possano attaccare l√¨.
		+ Renzo ha creato i container su `vde` in modo da usare `lxc` esistente.
	+ Si prende la descrizione su GitHub e la si trasforma in tutorial.
+ Integrazione di `vdelxc` in `lxc` ufficiale.
	+ Renzo vorrebbe una mano nella parte politica, per convincere le persone che mantengono la versione ufficiale ad inserirlo.
+ Fare il pacchetto Debian ufficiale `picotcp` da caricare nelle repo ufficiali.
	+ Tutto quello che facciamo lo firmiamo.
		+ Se √® una cosa bella la posso usare come valore aggiuntivo in futuro.
		+ Se la faccio a cazzo di cane sono un coglione.
	+ Guardare come fare pacchetti Debian ufficiali.
#### Progetti XXL Su `vuos`.
+ `ptrace`: libreria che utilizza `vuos` per virtualizzare le syscall.
	+ Ha tre difetti fondamentali:
		+ √à lenta.
		+ √à vulnerabile, in quanto ci sono vari metodi per aggirarla.
		+ Portabilit√†.
			+ Siccome catturiamo le syscall, ogni architettura mette le varie info per fare le syscall in registri diversi.
			+ In `umvu`, implementazione attuale di `vuos`, funziona solamente per `x86-64`.
	+ Hanno per√≤ aggiunto delle funzionalit√†.
		+ Ci sono dei tag che permettono di catturare le syscall in maniera indipendente dall'architettura.
		+ Si tratterebbe di usare le funzionalit√† `PTRACE_GET_SYSCALL_INFO` e `PTRACE_GET_SYSCALL_INFO`.
	+ Ne mancano per√≤ altre importanti.
	+ Si tratta di implementare la versione di `umvu` multi-architettura.
		+ Renzo lo vuole chiamare `mumvu`.
	+ Struttura del progetto:
		+ Proof of concept.
		+ Implementazione per vedere che funzioni.
		+ Alla fine bisogna far vedere che alla fine l'albero sorgente di `umvu` possa generare anche `mumvu`.
			+ Per non duplicare il codice in pi√π progetti.
+ `seccomp_unotify`: implementare `umvu` con questa libreria, ossia un altro sistema per catturare le syscall.
	+ `ptrace` si usa per mandare informazioni riguardo i processi, e non pi√π come libreria di totale appoggio sul progetto.
	+ Nasce per la sicurezza.
		+ Andrea Arcangeli.
		+ Si voleva creare un sistema per far eseguire dei programmi su processi remoti.
		+ Bisognava creare una cage in modo che il codice eseguito su altre macchine non facesse dei danni.
			+ Si aprono prima tutti i file che servono.
			+ Poi si possono solamente leggere e scrivere questi file.
			+ Successivamente si esce e i processi possono solamente fare dei calcoli.
		+ Ci sono anche dei filtri per dire che tipo di syscall arriva.
	+ Questa funzionalit√† fa in modo di catturare le syscall e modificarne l'esecuzione.
		+ Non √® possibile dire al kernel di fare un'altra cosa ma √® possibile spedire i file descriptor aperti.
			+ Tutte le operazioni che fa il processo virtualizzato devono venire fatte dall'hypervisor che manda questi file descriptor aperti.
	+ Consente due modi per passare al file descriptor.
		+ Voglio che questo file descriptor diventi un'altro, chiedo se quello che voglio che diventi √® disponibile.
		+ Altrimenti diventa un altro.
	+ Renzo lo vuole chiamare `sunvu`.

## ‚ùì Domande
---

## üí° Riferimenti
---
+ Directory con progetti vecchi e nuovi: https://www.cs.unibo.it/~renzo/vsd/
+ `fatfs`: https://elm-chan.org/fsw/ff/
+ `vde2`: https://github.com/virtualsquare/vde-2
+ `vdelxc`: https://github.com/virtualsquare/vdelxc
+ `sshlirp`: https://github.com/virtualsquare/sshlirp

## üß© Tasks
---
+ [ ] Review [[Lecture - 23-10-2025-09.20]]

```button 
name ‚úÖ Mark [[Lecture - 23-10-2025-09.20]] As Reviewed 
type command 
action QuickAdd: Mark As Reviewed
```
